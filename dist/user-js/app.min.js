const queryParams=new URLSearchParams(window.location.search),queryLogin=queryParams.get("login"),queryPassword=queryParams.get("password");let myAccount={login:queryLogin,password:queryPassword};const goodsContainer=document.getElementById("goodsContainer"),orderContainer=document.getElementById("orderContainer"),totalPrice=document.getElementById("totalPrice");let addToCart=document.getElementsByClassName("addToCart"),orderElements=document.getElementsByClassName("order"),orderArr=[],totalCosts,goods=(document.getElementById("userName").innerText=myAccount.login,[{name:"Humburger",image:"./images/humburger.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"8"},{name:"Hawaiian pizza",image:"./images/hawaiian-pizza.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"16"},{name:"Pepperoni pizza",image:"./images/pepperoni-pizza.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"14"}]);goodsContainer.innerHTML="";for(let r of goods){let e=document.createElement("div");e.setAttribute("class","card"),e.innerHTML=`
        <div class="topPart">
            <img src="${r.image}" alt="">
        </div>
        <div class="bottomPart">
            <h2>${r.name}</h2>
            <p>${r.info}</p>
            <h3>$${r.price}</h3>
            <div class="buttons">
                <div class="addToCart">
                    <i class="fa-solid fa-cart-shopping"></i>
                </div>
                <div class="copy">
                    <i class="fa-solid fa-copy"></i>
                </div>
            </div>
        </div>
    `,goodsContainer.appendChild(e)}function generateId(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let e=0;e<6;e++){var o=Math.floor(Math.random()*r.length);t+=r[o]}return t}for(let r=0;r<addToCart.length;r++)addToCart[r].addEventListener("click",function(){var e=new Date,e=`${e.getDate().toString().padStart(2,"0")}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getFullYear()}, ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:`+e.getSeconds().toString().padStart(2,"0");orderArr.push({good:goods[r].name,price:goods[r].price,client:myAccount.login,orderID:generateId(),count:1,img:goods[r].image,orderTime:e}),addOrder(),console.log(orderArr),totalCosts=orderArr.reduce((e,r)=>e+parseFloat(r.price),0),totalPrice.innerText="$"+totalCosts});function addOrder(){orderContainer.innerHTML="";for(var e of orderArr){var r=document.createElement("div");r.setAttribute("class","order"),r.innerHTML=`
            <img src="${e.img}" alt="">
            <h3>${e.good}</h3>
            <div class="deleteThis">delete</div>
        `,orderContainer.appendChild(r)}for(let r=0;r<orderElements.length;r++){let e=0;orderElements[r].addEventListener("click",function(){e=0===e?-145:0,this.style.marginLeft=e+"px"})}var t=document.getElementsByClassName("deleteThis");for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){var e,r=this.closest(".order");r&&(e=Array.from(r.parentElement.children).indexOf(r),orderArr.splice(e,1),r.remove()),console.log(orderArr),totalCosts=orderArr.reduce((e,r)=>e+parseFloat(r.price),0),totalPrice.innerText="$"+totalCosts})}document.getElementById("orderBtn").addEventListener("click",function(){axios.post("/send-order",orderArr),orderArr=[],orderContainer.innerHTML=""});