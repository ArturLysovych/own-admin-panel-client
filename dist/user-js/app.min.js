const queryParams=new URLSearchParams(window.location.search),queryLogin=queryParams.get("login"),queryPassword=queryParams.get("password");let myAccount={login:queryLogin,password:queryPassword};const goodsContainer=document.getElementById("goodsContainer"),orderContainer=document.getElementById("orderContainer"),totalPrice=document.getElementById("totalPrice");let addToCart=document.getElementsByClassName("addToCart"),orderElements=document.getElementsByClassName("order"),orderArr=[],totalCosts,goods=(document.getElementById("userName").innerText=myAccount.login,[{name:"Humburger",image:"./images/humburger.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"8"},{name:"Hawaiian pizza",image:"./images/hawaiian-pizza.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"16"},{name:"Pepperoni pizza",image:"./images/pepperoni-pizza.jpg",info:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nam.",price:"14"}]);goodsContainer.innerHTML="";for(let t of goods){let e=document.createElement("div");e.setAttribute("class","card"),e.innerHTML=`
        <div class="topPart">
            <img src="${t.image}" alt="">
        </div>
        <div class="bottomPart">
            <h2>${t.name}</h2>
            <p>${t.info}</p>
            <h3>$${t.price}</h3>
            <div class="buttons">
                <div class="addToCart">
                    <i class="fa-solid fa-cart-shopping"></i>
                </div>
                <div class="copy">
                    <i class="fa-solid fa-copy"></i>
                </div>
            </div>
        </div>
    `,goodsContainer.appendChild(e)}function generateId(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let e=0;e<6;e++){var o=Math.floor(Math.random()*t.length);r+=t[o]}return r}for(let t=0;t<addToCart.length;t++)addToCart[t].addEventListener("click",function(){var e=new Date,e=`${e.getDate().toString().padStart(2,"0")}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getFullYear()}, ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:`+e.getSeconds().toString().padStart(2,"0");orderArr.push({good:goods[t].name,price:goods[t].price,client:myAccount.login,orderID:generateId(),count:1,img:goods[t].image,orderTime:e}),addOrder(),console.log(orderArr),totalCosts=orderArr.reduce((e,t)=>e+parseFloat(t.price),0),totalPrice.innerText="$"+totalCosts});function addOrder(){orderContainer.innerHTML="";for(var e of orderArr){var t=document.createElement("div");t.setAttribute("class","order"),t.innerHTML=`
            <img src="${e.img}" alt="">
            <h3>${e.good}</h3>
            <div class="deleteThis">delete</div>
        `,orderContainer.appendChild(t)}for(let t=0;t<orderElements.length;t++){let e=0;orderElements[t].addEventListener("click",function(){e=0===e?-145:0,this.style.marginLeft=e+"px"})}var r=document.getElementsByClassName("deleteThis");for(let e=0;e<r.length;e++)r[e].addEventListener("click",function(){var e,t=this.closest(".order");t&&(e=Array.from(t.parentElement.children).indexOf(t),orderArr.splice(e,1),t.remove()),totalCosts=orderArr.reduce((e,t)=>e+parseFloat(t.price),0),totalPrice.innerText="$"+totalCosts})}document.getElementById("orderBtn").addEventListener("click",function(){axios.post("/send-order",orderArr),orderArr=[],orderContainer.innerHTML="",totalPrice.innerText="$0"}),document.querySelector(".user-image").addEventListener("dblclick",function(){window.location.href="/log-panel"});